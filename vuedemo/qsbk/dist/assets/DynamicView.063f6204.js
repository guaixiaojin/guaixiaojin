import{i as R,j as G,k as Q,l as X,m as Z}from"./index.699698c8.js";import{a as W,u as Y,r,c as J,d as $,e as t,h as a,k,g as w,F as q,i as M,j as e,l as z,t as c,n as f,m as _,f as F,q as A,I as E,D as H,x as N,_ as ee,w as te,z as ne,s as se,v as ae}from"./index.3c14ef27.js";import"./axios.8ade02f1.js";const le={class:"getdoor"},oe={class:"getdoorlist-left"},ce={class:"getdoorlist-right"},ie={class:"doorright-top"},ue={class:"title"},re={key:0,class:"mi"},_e={key:1,class:"mf"},de=e("p",null,null,-1),ve={class:"gz"},he=["onClick"],pe=e("span",{class:"col"},null,-1),me={class:"doorright-center"},fe={key:2,class:"picture"},ge={class:"doorright-footer"},ke={class:"commit"},ye=e("p",null,[e("span"),z("\u5206\u4EAB")],-1),$e=e("span",null,null,-1),we=["onClick"],xe={__name:"getDoor",setup(V){const i=W(),y=Y();let g=r(1),C=r([]);const T=()=>{R({page:g.value}).then(o=>{console.log(o),C.value=[...C.value,...o.data.data],N(()=>{g.value++})}).finally(()=>{N(()=>{S.value=!1})})},S=r(!1),I=r(!1),P=()=>{T()},x=(o,h,m)=>{let d=JSON.parse(JSON.stringify(m)).map(D=>D.pic_url);E({images:d,showIndex:!0,loop:!1,startPosition:h,closeable:!0,closeIconPosition:"top-left"})},L=J(()=>i.state.token),O=J(()=>i.state.followlist),U=o=>{L.value.length!=0?i.commit("getfollowlist",o):H.alert({message:"\u8BF7\u767B\u5F55"}).then(()=>{y.push({path:"login",query:{from:"/dynamic"}})})},B=J(()=>i.state.translate),b=o=>{L.value.length!=0?i.commit("getTranslate",o):H.alert({message:"\u8BF7\u767B\u5F55"}).then(()=>{y.push({path:"login",query:{from:"/dynamic"}})})};let v=r(function(o){var h=new Date,m=(h.getTime()/1e3).toFixed(0),d=m-o,D=(d/60).toFixed(0),u=(d/3600).toFixed(0),n=(u/24).toFixed(0),s=new Date(o*1e3).getFullYear()+"/"+String(new Date(o*1e3).getMonth()+1).padStart(0,2)+"/"+String(new Date(o*1e3).getDate()).padStart(0,2);return n>30?s:u>=24?n+"\u5929\u524D":u<1?D+"\u5206\u949F\u524D":u+"\u5C0F\u65F6\u524D"});return(o,h)=>{const m=$("van-image"),d=$("lazy-component"),D=$("van-grid-item"),u=$("van-grid"),n=$("van-list");return t(),a("div",le,[k(n,{loading:S.value,"onUpdate:loading":h[0]||(h[0]=s=>S.value=s),finished:I.value,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:P},{default:w(()=>[(t(!0),a(q,null,M(f(C),s=>(t(),a("div",{class:"getdoorlist",key:s.id},[e("div",oe,[k(d,null,{default:w(()=>[k(m,{round:"",width:"40rem",height:"40rem",src:s.user.medium},null,8,["src"])]),_:2},1024)]),e("div",ce,[e("div",ie,[e("div",ue,[e("p",null,[e("div",null,[z(c(s.user.login)+" ",1),e("p",null,c(f(v)(s.created_at)),1)]),s.user.gender=="F"?(t(),a("span",re,c(s.user.age),1)):_("",!0),s.user.gender=="M"?(t(),a("span",_e,c(s.user.age),1)):_("",!0)]),de]),e("div",ve,[!f(O).map(p=>p.id).includes(s.user.id)||f(L).length==0?(t(),a("span",{key:0,class:"fat",onClick:p=>U(s.user)},null,8,he)):_("",!0),pe])]),e("div",me,[s.content.toString().startsWith("{")?_("",!0):(t(),a("p",{key:0,ref_for:!0,ref:"title"},c(s.content),513)),s.pic_urls.length==1?(t(),F(m,{key:1,fit:"cover",width:"200rem",height:"200rem",src:s.pic_urls[0].pic_url,radius:"5rem",onClick:p=>x(s.pic_urls[0].pic_url,0,s.pic_urls)},null,8,["src","onClick"])):_("",!0),s.pic_urls.length>1?(t(),a("div",fe,[s.pic_urls?(t(),F(u,{key:0,"column-num":3},{default:w(()=>[(t(!0),a(q,null,M(s.pic_urls,(p,l)=>(t(),F(D,{key:l},{default:w(()=>[k(m,{fit:"cover",width:"100%",height:"90rem",src:p.pic_url,onClick:j=>x(p.pic_url,l,s.pic_urls)},null,8,["src","onClick"])]),_:2},1024))),128))]),_:2},1024)):_("",!0)])):_("",!0)]),e("div",ge,[e("p",null,c(s.distance),1),e("div",ke,[ye,e("p",null,[$e,z(c(s.comment_count),1)]),e("p",null,[e("span",{onClick:p=>b(s.id),class:A({translate:f(B).includes(s.id)&&f(L).length!=0})},null,10,we),z(c(f(B).includes(s.id)&&f(L).length!=0?s.like_count+1:s.like_count==0?"":s.like_count),1)])])])])]))),128))]),_:1},8,["loading","finished"])])}}};const De={class:"dynamicfollow"},Ce={class:"getdoorlist-left"},Se={class:"getdoorlist-right"},be={class:"doorright-top"},Te={class:"title"},Fe={key:0,class:"mi"},Ie={key:1,class:"mf"},Le=e("p",null,null,-1),ze={class:"gz"},Ne=["onClick"],Ve=e("span",{class:"col"},null,-1),qe={class:"doorright-center"},Me={key:0},Pe={key:2,class:"picture"},Ue={class:"doorright-footer"},Be={class:"commit"},Je=e("p",null,[e("span"),z("\u5206\u4EAB")],-1),Oe=e("span",null,null,-1),Ke=["onClick"],je={__name:"getdynamicfollow",setup(V){const i=W(),y=Y();let g=r([]);r(1);const C=()=>{G().then(v=>{console.log(v),g.value=v.data.data,N(()=>{S.value=!0})}).finally(()=>{N(()=>{T.value=!1})})},T=r(!1),S=r(!1),I=()=>{C()},P=(v,o,h)=>{let m=JSON.parse(JSON.stringify(h)).map(d=>d.pic_url);E({images:m,showIndex:!0,loop:!1,startPosition:o,closeable:!0,closeIconPosition:"top-left"})},x=J(()=>i.state.token),L=J(()=>i.state.followlist),O=v=>{x.value.length!=0?i.commit("getfollowlist",v):Dialog.alert({message:"\u8BF7\u767B\u5F55"}).then(()=>{y.push({path:"login",query:{from:"/dynamic"}})})},U=J(()=>i.state.translate),B=v=>{x.value.length!=0?i.commit("getTranslate",v):Dialog.alert({message:"\u8BF7\u767B\u5F55"}).then(()=>{y.push({path:"login",query:{from:"/dynamic"}})})};let b=r(function(v){var o=new Date,h=(o.getTime()/1e3).toFixed(0),m=h-v,d=(m/3600).toFixed(0),D=(d/24).toFixed(0),u=new Date(v*1e3).getFullYear()+"/"+String(new Date(v*1e3).getMonth()+1).padStart(0,2)+"/"+String(new Date(v*1e3).getDate()).padStart(0,2);return D>30?u:d>=24?D+"\u5929\u524D":d+"\u5C0F\u65F6\u524D"});return(v,o)=>{const h=$("van-image"),m=$("lazy-component"),d=$("van-grid-item"),D=$("van-grid"),u=$("van-list");return t(),a("div",De,[k(u,{loading:T.value,"onUpdate:loading":o[0]||(o[0]=n=>T.value=n),finished:S.value,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:I},{default:w(()=>[(t(!0),a(q,null,M(f(g),(n,s)=>(t(),a("div",{class:"getdoorlist",key:n.id},[e("div",Ce,[k(m,null,{default:w(()=>[k(h,{round:"",width:"40rem",height:"40rem",src:n.user.medium},null,8,["src"])]),_:2},1024)]),e("div",Se,[e("div",be,[e("div",Te,[e("p",null,[e("div",null,[z(c(n.user.login)+" ",1),e("p",null,c(f(b)(n.created_at)),1)]),n.user.gender=="F"?(t(),a("span",Fe,c(n.user.age),1)):_("",!0),n.user.gender=="M"?(t(),a("span",Ie,c(n.user.age),1)):_("",!0)]),Le]),e("div",ze,[!f(L).map(p=>p.id).includes(n.user.id)||f(x).length==0?(t(),a("span",{key:0,class:"fat",onClick:p=>O(n.user)},null,8,Ne)):_("",!0),Ve])]),e("div",qe,[n.content.toString().startsWith("{")?_("",!0):(t(),a("p",Me,c(n.content),1)),n.pic_urls.length==1?(t(),F(h,{key:1,fit:"cover",width:"200rem",height:"200rem",src:n.pic_urls[0].pic_url,radius:"5rem",onClick:p=>P(n.pic_urls[0].pic_url,0,n.pic_urls)},null,8,["src","onClick"])):_("",!0),n.pic_urls.length>1?(t(),a("div",Pe,[n.pic_urls?(t(),F(D,{key:0,"column-num":3},{default:w(()=>[(t(!0),a(q,null,M(n.pic_urls,(p,l)=>(t(),F(d,{key:l},{default:w(()=>[k(h,{fit:"cover",width:"100%",height:"90rem",src:p.pic_url,onClick:j=>P(p.pic_url,l,n.pic_urls)},null,8,["src","onClick"])]),_:2},1024))),128))]),_:2},1024)):_("",!0)])):_("",!0)]),e("div",Ue,[e("p",null,c(n.distance),1),e("div",Be,[Je,e("p",null,[Oe,z(c(n.comment_count),1)]),e("p",null,[e("span",{onClick:p=>B(n.id),class:A({translate:f(U).includes(n.id)&&f(x).length!=0})},null,10,Ke),z(c(f(U).includes(n.id)&&f(x).length!=0?n.like_count+1:n.like_count==0?"":n.like_count),1)])])])])]))),128))]),_:1},8,["loading","finished"])])}}};const K=V=>(se("data-v-4ec14cdc"),V=V(),ae(),V),He={class:"gettopic"},We={class:"search"},Ye={key:0,for:"user"},Ae=["value","onKeydown"],Ee=K(()=>e("div",{class:"blackwold"},null,-1)),Re={key:0,class:"hottopic"},Ge=K(()=>e("div",{class:"hottopic-top"},[e("p",null,"\u70ED\u95E8\u5206\u7C7B"),e("p",null,[z("\u66F4\u591A"),e("span")])],-1)),Qe={class:"hottopic-footer"},Xe=["onClick"],Ze={key:1,class:"posts"},et=K(()=>e("p",null,"\u6700\u65B0\u66F4\u65B0",-1)),tt={class:"recommend-center"},nt={class:"recommendlist-left"},st={class:"title"},at={class:"abstract"},lt={key:2,class:"posts"},ot={key:0},ct={class:"recommend-center"},it={class:"recommendlist-left"},ut={class:"title"},rt={class:"abstract"},_t={__name:"gettopic",setup(V){const i=r(""),y=r(!0),g=r(!0),C=r([]);(()=>{Q().then(u=>{C.value=u.data.categories})})();let S=r(1),I=r([]);const P=()=>{Z({page:S.value}).then(u=>{I.value=[...I.value,...u.data.data],N(()=>{S.value++})}).finally(()=>{N(()=>{x.value=!1})})},x=r(!1),L=r(!1),O=()=>{P()},U=()=>{i.value="",y.value=!0,g.value=!0,o.value=1,b.value=[],d.value=!1};te(i,u=>{u==""&&(y.value=!0,g.value=!0,o.value=1,b.value=[],d.value=!1)});const B=u=>{i.value=u,h()},b=r([]),v=r(0),o=r(1),h=()=>{y.value=!1,X({page:o.value,search:i.value}).then(u=>{console.log(u),b.value=[...b.value,...u.data.data],v.value=u.data.total,g.value=!1,N(()=>{o.value++,console.log(b.value.length),b.value.length==u.data.total-1&&(d.value=!0)})}).finally(()=>{N(()=>{m.value=!1})})},m=r(!1),d=r(!1),D=()=>{o.value>=2&&h()};return(u,n)=>{const s=$("van-image"),p=$("van-list");return t(),a("div",He,[e("div",We,[e("div",null,[i.value==""?(t(),a("label",Ye)):_("",!0),e("input",{type:"text",placeholder:"\u641C\u7D22\u5185\u5BB9",name:"user",value:i.value,onKeydown:ne(h,["enter"])},null,40,Ae),i.value!=""?(t(),a("span",{key:1,class:"close",onClick:U})):_("",!0)]),Ee]),y.value?(t(),a("div",Re,[Ge,e("div",Qe,[e("ul",null,[(t(!0),a(q,null,M(C.value,l=>(t(),a("li",{class:"hottopiclist",key:l.id,onClick:j=>B(l.name)},c(l.name),9,Xe))),128))])])])):_("",!0),y.value?(t(),a("div",Ze,[et,k(p,{loading:x.value,"onUpdate:loading":n[0]||(n[0]=l=>x.value=l),finished:L.value,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:O},{default:w(()=>[e("div",tt,[(t(!0),a(q,null,M(f(I),l=>(t(),a("div",{class:"recommendlist",key:l.id},[e("div",nt,[k(s,{width:"50rem",height:"50rem",fit:"cover",src:l.avatar_urls[0].pic_url,radius:"5rem"},null,8,["src"]),e("div",st,[e("p",null,c(l.content),1),e("div",at,c(l.abstract),1),e("div",null,[e("span",null,"\u52A8\u6001"+c(l.all_article_count),1),e("span",null,"\u4ECA\u65E5"+c(l.today_article_count),1)])])])]))),128))])]),_:1},8,["loading","finished"])])):_("",!0),y.value?_("",!0):(t(),a("div",lt,[k(p,{loading:m.value,"onUpdate:loading":n[1]||(n[1]=l=>m.value=l),finished:d.value,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:D},{default:w(()=>[g.value?_("",!0):(t(),a("p",ot,"\u641C\u7D22\u7ED3\u679C("+c(v.value)+")",1)),e("div",ct,[(t(!0),a(q,null,M(b.value,l=>(t(),a("div",{class:"recommendlist",key:l.id},[e("div",it,[l.avatar_urls?(t(),F(s,{key:0,width:"50rem",height:"50rem",fit:"cover",src:l==null?void 0:l.avatar_urls[0].pic_url,radius:"5rem"},null,8,["src"])):_("",!0),e("div",ut,[e("p",null,c(l.content),1),e("div",rt,c(l.abstract),1),e("div",null,[e("span",null,"\u52A8\u6001"+c(l.all_article_count),1),e("span",null,"\u4ECA\u65E5"+c(l.today_article_count),1)])])])]))),128))])]),_:1},8,["loading","finished"])]))])}}},dt=ee(_t,[["__scopeId","data-v-4ec14cdc"]]);const vt={class:"dynamic"},ht={class:"dynamic-top"},pt=e("span",{class:"title-eee"},"\u7B7E\u5230",-1),mt=e("span",{class:"abccc"},null,-1),yt={__name:"DynamicView",setup(V){const i=r(0),y=g=>{i.value=g.name};return(g,C)=>{const T=$("van-tab"),S=$("van-tabs");return t(),a("div",vt,[e("div",ht,[pt,mt,k(S,{active:g.active,"onUpdate:active":C[0]||(C[0]=I=>g.active=I),onClickTab:y,sticky:""},{default:w(()=>[k(T,{title:"\u9694\u58C1"},{default:w(()=>[i.value==0?(t(),F(xe,{key:0})):_("",!0)]),_:1}),k(T,{title:"\u5173\u6CE8"},{default:w(()=>[i.value==1?(t(),F(je,{key:0})):_("",!0)]),_:1}),k(T,{title:"\u8BDD\u9898"},{default:w(()=>[i.value==2?(t(),F(dt,{key:0})):_("",!0)]),_:1})]),_:1},8,["active"])])])}}};export{yt as default};
