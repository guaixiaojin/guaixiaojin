import{_ as re,a as ue,u as ie,B as ce,r as o,o as de,w as pe,c as b,b as ve,d as R,e as g,h as w,k as W,g as G,m as S,f as X,x as ge,l as q,F as me,i as he,j as a,t as c,n as u,q as K,T as J,D as x,s as fe,v as ke}from"./index.3c14ef27.js";import{q as ye}from"./index.699698c8.js";import"./axios.8ade02f1.js";const _e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGkAAAA5CAMAAAAC0vX/AAAAAXNSR0IArs4c6QAAALFQTFRF////6enpY2NjS0tL+Pj4ODg4zs7OTGlxICAgLCwsJSUlQ0ND////a2trv7+/XFxcycnJ////////paWl+/v7VlZW////c3NzsLCw////3d3djIyM5eXlkpKS////////////////////////////////////////////////////Pz8/KSkpUFBQ8vLy////PT09MTExmpqaLi4uurq6////f39/1NTUfHx8g4OD7+/v22+PwwAAADt0Uk5TmZ7K1JrepQDq5OjYMceqzaeAgbKa0FHDrgKhup+4KWxdkpCKQhN5NhlqD9rm0pxT3OG146txv6TAvZ1bZoEuAAAC+ElEQVR42sWY63aiMBRGjwrMx8U7CopU66Var9W22vH9H2xi1GAtxDgjzP4hyWKtbKMnOcmhX3FMx6vX6uCZ7uV5UH1djaexY8aYJs0a/Ru15kTB5LzQI3hxWnKTU6VHUXMkplGXHkl3lGR66tNj6T/Fm4b0eIYxplaP0qDXuja1PikdPltXph6lRe+7aUjpMbw0PVGaPEWmUZ/SpD8Spi6lS/dsckiCVhdNt7jpUNRrU0Q7KJIE52SS7XXBGkJVB+zoG5RNnwQL4EO2B3KTfEpb4L0jhouslAewFT0fKEsnxU3SNOHaYgwD0N3o9yoAyIu+DqsjSyIH04SkGNZ5JmUgpAjXA9DQ6EgA/CYJE2ZqkpzfQJ4YJeBdo0tCYN3O25wZYNpHchRDk5lqydPJc6wZf+iAzhs7OrNZ78jGNZ34mKApJeIjBhFkhwGXpGpinvFfmjZWyJ+uxvkAytoRimVMK0pkaZzxAE90lqe1haJLgtKNMGeeV1LgS4RdtHB55CmbmKdKCuTFmo3YcpWyqUoDUqAAVOiaEDANZdOAnkkBPTaiQrNEqiapZ20KAJgRazrB16hXPFAG9CLHuN9lIQGLLpnjO36CR/I/zfQz3GmK7kyklK+OsmmgEnsdbtI1umJpwsqRUTmwARYVzj4h9lTWkwc0yjF7dQA07lhPK7pF2wIM9jG/CnRXB/w79ogx3SD3xgfxABHUItnrpGwa05Tk7GbAfEekLdjTpwtsIFA3TXl+krCZAxYXaDydR2nug5n3yqbajZzr22CiOnH2B5UZatH5pUjKpqbsHJELbDDeDBECWwvAu9c+nV/A3oSFIzZ7cWp6FMNEcjbyLTDmXxpFVHQwrOC4vRf4CvjBIu5sJDvvuTPA9HJXaSlYM3ubNd6AurrJ4aakmCg16jGZWgt1HnFuveyyxzL3g33MBiHO5WnjZHbXyO7+lNmdMLN7bmZ39+zqEZnVWLKqG2VfC8u+vidwavQoqo68Dtt6WB32/9WWs6uX/wHGwk5XAOWHCQAAAABJRU5ErkJggg==",I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAMAAAAKE/YAAAAAAXNSR0IArs4c6QAAAFpQTFRF////AAAAAAAAAAAAAAAAAAAAAAAAAAAATGlxAAAAAAAAAAAABAQEAAAAAAAAAAAAAAAAAAAAVFRU7u7u/f39+/v7/f39tra29vb22dnZgoKCm5ubx8fH5+fna4O3OgAAAB50Uk5T5g0IBAIDCgEABRETKCUfIiQZM5nSwd9TrXM9SGOI0e0uzwAABKVJREFUeNrt3Yty2jAQBVClLqHFWH5gHiHh/3+zNojeGNnddBZ0raD9gjM7G93YyJL5FWF9T/RyvOaLXgpFQwvkWbKNYBaLhJbJP29LYJPQo+JFV3AT2UYwg/u5bt2zQkOcfSq4SWwjma/i33/LwX02Hw0zxCiwGWozbR6Sf6Cc22ez0TA78bC4bDPZaGcG+dUV3Cy2+UejnRnil66cG2xPzUH75gsYdXWPN5uGhhnkVZ6vVgy2jEajnflCrq2ruoM79+1oQ01CD82rsxnsFbp9brY/2hx0lsGc99Zmv9+/N2VXNgdbmJFwaDQa5mZjznU43rCnlz8OuuOcZ8Pa8rg1rnandVWVZQ22MCMB0Vl2abQztwbVfhRFVdo6Z82Ij/YaXduy2ZpBHd47tjQjrgKj0eiNua1T07NrsHURqUdjOlyjj8av9m1dFKTRNhMjjUbXJRo9qO1+fZ6R8KMto21Zbc14bZovj3YAtBvp3tyjWzNRu35GquAzIqPLsoBybEbCL39m8u/wxwWdl9Uk2kXkWr386dEYaYdeT3ARkeGWPxn9ckYXk2hEZMcuLdiaGdGjVwIaERly+ZPRlYiWI3IhqFlo04Za/mR0DrRYW8WM6NELER0gInXotYBWRCQfjYgsFBEZAM2JSBldCGhlRPLRckT6bAKaEJEKtD4iwaag9RHJQesjko9GRCqWPwIaEalY/ghoRKTiCYGARkQqRpuAliJy4an5aERkpYhIAloRkRQ06qR4QqChTatY/ihoRGShmBECWhGRBLQiItloOSJ9NgWtj0gGWh+RFLQ+IilofUTS0aiTtPxBzUDrnyIpaDkiV2MzAjUBLUdkLmUNHS1H5LSaj0ZEVrbGjIyPCAstR6TfbKh5aDkifTUZLb9oRbN9NQktRySa7amJaPlF60CtQQep9u2yp0FQE9DC8tdvMrI51G5AyGj5t8h+299A7VrNRMsRWfXNdmo3IHS0PCNX9aDVbLQ8I6W1OQZksYgAbbbHTt3NdVRo03bq+jrVWYahnjPaHPoBQasx1HNGmxNajfmYO3rXT3VsaPPh5iMq9Mna+orOYkEfYkS31tro0LvY0YuYZjq6dfpobR4Zerd30xEBGuYS2RLJP0ztuzNjOmaP3jR4dBmg0+PWox5s0egoXiGsYAZ6/i9rXvxXTDN9Leba7Jvnit74LyAxHOdKr3rv9btzVC/Vd8M9wK/j5mX6oegRP8n55kh+/IS5r7h+ZoaZj8Z+plxu8zJtnXjgHj20OW0HeqaNV7v/+AgmbSZ8pm2bCEB5zUhbke8SgNIwp+31cuk/dV6mT0ae6OMcOQBBTh+cBfm0L31E+U0/V1UfL5U+wZbR+i/50rEC3/MAB30ApkNJBmhFAPKOf+EGIP9II5gJh0dpAzAd0yWgFQEIcjp6jnDIH/E4xa+fJpsOrgxyRGg6jDXEsbfpgGHGUc78Q7PlAEzHkxMOgiceud9UVRkgADmXGyzTNRIhLuxIV6MEuYQmXfdzn4uVQB5b5tIVVkEuC0vXsj3uAjyY01WDQS51TNdn3vGiUnAvYlS6EjbE5bvpmuMQF0qnq7uf/pL0OdYfJ+2mLw2yPlYAAAAASUVORK5CYII=",O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAMAAAAKE/YAAAAAAXNSR0IArs4c6QAAADZQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAATGlxBQUFAAAAAAAAAAAA/f399/f3+Pj419fXdu7XaAAAABJ0Uk5TAgwRJQQFCOYBAB8iFSncrrhpERoHswAAAvpJREFUeNrt3dFyozAMBVBsNwmN0zT5/58tBgahyqDWBjPA1evO3nvwOvuGqD53OEADDTTQQAMNNNBAA71ndF3n1lLSeuh6dqi5UFKVW0N15ZKqhKKqGaUsMykLLSrYyMoCSSpa9mhtayfpaKWHRu2qE6IS0HHzBx+1SyYpUSwpBz2uuYwnWqYl6VHJaNnEalib0pWelI7mRdfxdGVDl4Im80VGcXYSWpqJzEd0RdHy6eNJF12to6mJiswwYzaryk+qstDUxHpY22/1ekkSrTeZyMguiU5OqhW00kRFdhjRpaC5WSYZpk5GS7Nlw7r6qji6/UMlidSZaN5kH/df87Bdl6iKP35ImsohdTJaNhkb0j1NXzeoNfSQFMgyyhr+/EloOmhudv0MbCuqZh8/5MgkUjeFOWhq6s3+/XreRvN8vUNbf0Aauk8Kf0PmBDa7aklo3hS6/P37Jua7uyGyKv747d2YyrkbdtXy0bZB912yzcoqmUSXI57jQ046Wh5P+L379y067/aoVTQd9FSO7/4PUe6HiuYH/YqXvdj9kGhxO6Zy2FHnok2L9v4ZL3vST3EOTT/DqRzvW7RZCm0btLtNTIs2f0GbFj2V4xq0XRTtS6B9Fpou4lVHe4auJLpiaK+jr/Gfh47mB229Wx/tvKWjXh8dquh8BJr+zWxJ9ENBU5VEU5KKfiyN/lob/bU42s2g/X/QfgbtgJ5Fu/+hHdDHQtuSaAs00EADDTTQQAMNNNBAAw000EADDTTQQAMNNNBAAw000EADDTTQQAMNNNBAAw000EADDTTQQAMNNNBAAw000HijCGi82rcsGq+rFnsxGK9gb/Ky+5HXCmy/wOHsqzKKLyU52/qX7RftHH6lkUSHy1h4edTR1nTlL0QzBRaiHXP13PZL/k63TnH7xZW7XBF6yGWs6y2rrbtJSNrlguE9rnI+ydLs7deTn2QR/PYr98/xcYPtPyOxxw92nO7TKOU/QnP2z/3ga1BAAw000EADDTTQQAMdmx9fmnpsixLZEAAAAABJRU5ErkJggg==";const j=k=>(fe("data-v-2b0bf359"),k=k(),ke(),k),Ne={class:"playing"},Te={key:0,class:"play-mark"},be={class:"swiper-mark"},Re={class:"mark-top"},we={class:"user"},Ie={class:"user-title"},je=["onClick"],Be={key:0,src:_e,alt:""},Ee={class:"mark-footer"},Qe={class:"play"},Ce={class:"play-center"},Ue=j(()=>a("span",null,null,-1)),Ge=[Ue],Se=j(()=>a("div",{class:"play-foorter"},null,-1)),xe={class:"title"},qe={class:"play-like"},He={class:"like-left"},Ve=["onClick"],Ye=["onClick"],Ze={class:"like-right"},De={class:"comment"},Fe=j(()=>a("span",null,null,-1)),Le=j(()=>a("p",{class:"share"},[a("span"),q("\u5206\u4EAB")],-1)),We=["src"],Xe={__name:"playingView",setup(k){const i=ue(),y=ie(),_=ce(),B=o(!1);let H=o(1),N=o([]);const V=()=>{ye({page:H.value,playing:_.query.id}).then(e=>{console.log(e),B.value=!0,N.value=[...N.value,...e.data.items],ge(()=>{H.value++})})},Y=o(),s=o(),E=o(""),Q=o(""),C=o(),m=o(),M=o(),d=o();V(),de(()=>{pe(s,e=>{e&&(s.value[0].play(),s.value[0].oncanplay=()=>{const t=s.value[0];let h=parseInt(t.duration/60),A=parseInt(t.duration%60)<10?"0"+parseInt(t.duration%60):parseInt(t.duration%60);E.value=h+":"+A,t.ontimeupdate=()=>{let l=parseInt(t.currentTime/60),f=parseInt(t.currentTime%60)<10?"0"+parseInt(t.currentTime%60):parseInt(t.currentTime%60);Q.value=l+":"+f;let n=t.currentTime/t.duration*C.value[0].offsetWidth;m.value[0].style.width=n+"rem"},t.onended=()=>{d.value[0].style.backgroundImage=`url("${I}")`,p.value=!1}})})});const U=o(0);o(!1);const p=o(!0),z=e=>{p.value?(s.value[e].pause(),d.value[e].style.backgroundImage=`url("${I}")`,p.value=!1):(s.value[e].play(),d.value[e].style.backgroundImage=`url("${O}")`,p.value=!0)},P=b(()=>i.state.followlist),v=b(()=>i.state.token),$=e=>{v.value.length!=0?(i.commit("getfollowlist",e),J.success("\u5173\u6CE8\u6210\u529F")):x.alert({message:"\u8BF7\u767B\u5F55"}).then(()=>{y.push({path:"login",query:{from:`/playing?id=${_.query.id}`}})})},Z=b(()=>i.state.likes),ee=e=>{v.value.length!=0?i.commit("getactivecc",e):x.alert({message:"\u8BF7\u767B\u5F55"}).then(()=>{y.push({path:"login",query:{from:`/playing?id=${_.query.id}`}})})},ae=b(()=>i.state.notlikes),te=e=>{v.value.length!=0?i.commit("getnotactivecc",e):x.alert({message:"\u8BF7\u767B\u5F55"}).then(()=>{y.push({path:"login",query:{from:`/playing?id=${_.query.id}`}})})},se=e=>{p.value=!0,e+1===N.value.length&&V(),U.value=e,s.value.forEach((A,l)=>{A.pause(),A.ontimeupdate=null}),d.value.forEach((A,l)=>{A.style.backgroundImage=`url("${I}")`,l==e&&(A.style.backgroundImage=`url("${O}")`)}),s.value[e].play();let t=parseInt(s.value[e].duration/60),h=parseInt(s.value[e].duration%60)<10?"0"+parseInt(s.value[e].duration%60):parseInt(s.value[e].duration%60);E.value=t+":"+h,s.value[e].ontimeupdate=()=>{let A=parseInt(s.value[e].currentTime/60),l=parseInt(s.value[e].currentTime%60)<10?"0"+parseInt(s.value[e].currentTime%60):parseInt(s.value[e].currentTime%60);Q.value=A+":"+l;let f=s.value[e].currentTime/s.value[e].duration*C.value[e].offsetWidth;m.value[e].style.width=f+"rem",s.value[e].onended=()=>{d.value[e].style.backgroundImage=`url("${I}")`,p.value=!1}}},ne=(e,t)=>{m.value[t].style.width=e.target.value/100*m.value[t].duration,s.value[t].currentTime=e.target.value/100*s.value[t].duration};ve(()=>{s.value.forEach(e=>{e.ontimeupdate=null})});const oe=()=>{J.success("3\u79D2\u540E\u64AD\u653E\u4E0B\u4E00\u4E2A\u89C6\u9891")},T=o(null),D=()=>{clearTimeout(T.value)},Ae=()=>{T.value&&D(T.value),T.value=setTimeout(()=>{Y.value.next()},3e3)},le=()=>{y.back()};return(e,t)=>{const h=R("van-loading"),A=R("van-image"),l=R("van-swipe-item"),f=R("van-swipe");return g(),w("div",Ne,[B.value?S("",!0):(g(),w("div",Te,[W(h,{size:"24px","text-color":"#ffe300",color:"#ffe300",vertical:""},{default:G(()=>[q("\u52A0\u8F7D\u4E2D...")]),_:1})])),B.value?(g(),X(f,{key:1,ref_key:"swiper",ref:Y,onChange:se,style:{width:"100vw",height:"100vh"},vertical:"","show-indicators":!1,loop:!1},{default:G(()=>[(g(!0),w(me,null,he(u(N),n=>(g(),X(l,{style:{width:"100vw",height:"100vh",backgroundColor:"black",display:"flex",alignItems:"center"},key:n.id},{default:G(()=>{var F,L;return[a("div",be,[a("div",Re,[a("span",{class:"back",onClick:le}),a("div",we,[W(A,{round:"",width:"35rem",height:"35rem",fit:"contain",src:n.user.medium},null,8,["src"]),a("div",Ie,[a("p",null,c(n.user.login),1),a("span",null,c(n.comments_count)+"\u6B21\u64AD\u653E",1)])]),a("span",{class:"gz",onClick:r=>$(n.user)},[!u(P).map(r=>r.id).includes(n.user.id)||u(v).length==0?(g(),w("img",Be)):S("",!0)],8,je)]),a("div",Ee,[a("div",Qe,[a("div",{class:"play-top",ref_for:!0,ref_key:"playtop",ref:d,onClick:t[0]||(t[0]=r=>{z(U.value),D()})},null,512),a("div",Ce,[a("span",null,c(Q.value),1),a("div",{class:"bar",ref_for:!0,ref_key:"bar",ref:C},[a("input",{type:"range",ref_for:!0,ref_key:"input",ref:M,name:"",id:"",value:"0",step:"1",onInput:t[1]||(t[1]=r=>ne(r,U.value))},null,544),a("p",{ref_for:!0,ref_key:"playmove",ref:m},Ge,512)],512),a("span",null,c(E.value),1)]),Se]),a("p",xe,c(n.content),1),a("div",qe,[a("div",He,[a("span",{class:K(["support",{active:u(Z).includes(n.id)&&u(v).length!=0}]),onClick:r=>ee(n.id)},null,10,Ve),a("p",null,c(u(Z).includes(n.id)?((F=n==null?void 0:n.votes)==null?void 0:F.up)+1:(L=n==null?void 0:n.votes)==null?void 0:L.up),1),a("span",{class:K(["nosupport",{notactive:u(ae).includes(n.id)&&u(v).length!=0}]),onClick:r=>te(n.id)},null,10,Ye)]),a("div",Ze,[a("p",De,[Fe,q(c(n.comments_count),1)]),Le])])])]),a("video",{ref_for:!0,ref_key:"videos",ref:s,src:n.high_url,muted:"",onEnded:t[2]||(t[2]=r=>{oe(),Ae()})},null,40,We)]}),_:2},1024))),128))]),_:1},512)):S("",!0)])}}},Me=re(Xe,[["__scopeId","data-v-2b0bf359"]]);export{Me as default};
