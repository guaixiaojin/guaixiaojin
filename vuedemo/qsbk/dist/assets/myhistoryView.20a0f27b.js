import{c as _e,_ as ne,a as te,b as se,d as re,e as ae,f as ie,g as ue,h as ce,i as oe,j as me,k as pe,l as he,m as de,n as ge,o as ve,p as ke,q as ye,r as le,s as fe,t as qe,u as Ce,v as xe,w as ze,x as Ie,y as Se,z as be,A as $e,B as Ne,C as Be,D as Pe,E as Ve,F as Ae,G as Le,H as Te,I as Fe,J as He,K as Je,L as Me,M as Oe,N as Re,O as je,P as De,Q as Ee,R as Ge,S as Ke,T as Qe}from"./index.a65c15ed.js";import{_ as Ue}from"./operation_follow.6643abf4.js";import{_ as We}from"./ic_nav_close.4f0761b7.js";import{a as Xe,B as Ye,u as Ze,c as v,r as L,d as k,e as t,h as i,j as _,F as T,i as F,n as d,k as o,l as p,t as s,m,p as we,g,f as q,q as H,I as J}from"./index.3c14ef27.js";import"./_commonjsHelpers.6e81687c.js";const e_=_("div",{class:"logoheader"},[_("p",null,"\u5386\u53F2")],-1),__=_("div",{class:"logo-follow"},null,-1),n_={class:"follow-top"},t_={class:"follow-top-left"},s_=["onClick"],r_={class:"userimg"},a_={key:0},i_={key:0},u_={class:"follow-top-right"},c_=["onClick"],o_={key:0,src:Ue},m_=["onClick"],p_=_("img",{src:We},null,-1),h_=[p_],d_=["innerHTML","onClick"],g_={key:0,class:"video"},v_={class:"imgboxs"},k_=_("span",{class:"play"},null,-1),y_=["textContent"],l_=["textContent"],f_={key:1,class:"video"},q_={class:"imgboxc"},C_=_("span",{class:"play"},null,-1),x_=["textContent"],z_=["textContent"],I_={class:"picture"},S_={key:2,class:"comment"},b_={class:"comment-top"},$_={class:"comment-footer"},N_={class:"follow-footer"},B_={class:"follow-footer-left"},P_=["onClick"],V_=["onClick"],A_={class:"follow-footer-right"},L_=_("span",null,null,-1),T_=_("span",null,null,-1),E_={__name:"myhistoryView",setup(F_){const u=Xe();Ye();const y=Ze(),M=v(()=>u.state.article),O=n=>{u.commit("clearArticle",n)},R=v(()=>u.state.followlist),j=n=>{u.commit("getfollowlist",n)},C=v(()=>u.state.likes),D=n=>{u.commit("getactivecc",n)},E=v(()=>u.state.notlikes),G=n=>{u.commit("getnotactivecc",n)},K=()=>{y.back()},Q=(n,r)=>{y.push({path:"/article",query:{id:n}}),u.commit("getArticle",r)},U=(n,r,c)=>{let h=JSON.parse(JSON.stringify(c)).map(l=>l.pic_url);J({images:h,showIndex:!0,loop:!1,startPosition:r,closeable:!0,closeIconPosition:"top-left"})},W=(n,r)=>{J({images:[n],showIndex:!0,loop:!1,startPosition:r,closeable:!0,closeIconPosition:"top-left"})},X=n=>{y.push({path:"/user",query:{id:n}})},Y=[ne,te,se,re,ae,ie,ue,ce,oe,me,pe,he,de,ge,ve,ke,ye,le,fe,qe,Ce,xe,ze,Ie,Se,be,$e,Ne,Be,Pe,Ve,Ae,Le,Te,Fe,He,Je,Me,Oe,Re,je,De,Ee,Ge,Ke,Qe],Z=L(0);for(let n of Y){let r=new Image;r.onload=()=>{Z.value++},r.src=n}const w=L(!1);return _e(),(n,r)=>{const c=k("van-image"),h=k("lazy-component"),l=k("van-grid-item"),ee=k("van-grid");return t(),i("div",null,[_("div",{class:"history-top"},[_("div",{class:"logo-back",onClick:K}),e_,__]),(t(!0),i(T,null,F(d(M),(e,H_)=>{var x,z,I,S,b,$,N,B,P,V;return t(),i("div",{class:"myhistory",key:e.id},[_("div",n_,[_("div",t_,[_("p",{onClick:a=>X(e.user.uid)},[o(c,{round:"",width:"35rem",height:"35rem",src:(x=e==null?void 0:e.user)==null?void 0:x.medium},null,8,["src"])],8,s_),_("div",r_,[_("p",null,[p(s((z=e==null?void 0:e.user)==null?void 0:z.login),1),(I=e==null?void 0:e.user)!=null&&I.titles?(t(),i("span",a_,[o(c,{fit:"cover",width:"15rem",height:"15rem",src:e.user.titles[0].icon,alt:""},null,8,["src"])])):m("",!0)]),(S=e==null?void 0:e.user)!=null&&S.talents?(t(),i("p",i_,s(e.user.talents[0].cmd_desc),1)):m("",!0)])]),_("div",u_,[_("span",{onClick:a=>j(e.user)},[d(R).map(a=>a.id).includes(e.user.id)?m("",!0):(t(),i("img",o_))],8,c_),_("span",{onClick:a=>O(e.id)},h_,8,m_)])]),_("p",{class:"title",innerHTML:e.content,onClick:a=>Q(e.id,e)},null,8,d_),e.pic_url&&e.pic_size[0]-e.pic_size[1]<0?(t(),i("div",g_,[_("div",{class:"mark",style:we(`background-image:url('${e.pic_url}')`)},null,4),o(h,null,{default:g(()=>[_("div",v_,[o(c,{fit:"cover",width:"200rem",src:e.pic_url,alt:""},null,8,["src"])])]),_:2},1024),k_,_("p",null,[_("span",{textContent:s(parseInt(((b=e.image_size)==null?void 0:b.m[2])/60))},null,8,y_),p(":"),_("span",{textContent:s(parseInt((($=e.image_size)==null?void 0:$.s[2])%60).toString().padStart(2,"0"))},null,8,l_)])])):m("",!0),e.pic_url&&e.pic_size[0]-e.pic_size[1]>=0?(t(),i("div",f_,[o(h,null,{default:g(()=>[_("div",q_,[o(c,{fit:"cover",width:"100%",src:e.pic_url,alt:""},null,8,["src"])])]),_:2},1024),C_,_("p",null,[_("span",{textContent:s(parseInt(((N=e.image_size)==null?void 0:N.m[2])/60))},null,8,x_),p(":"),_("span",{textContent:s(parseInt(((B=e.image_size)==null?void 0:B.s[2])%60).toString().padStart(2,"0"))},null,8,z_)])])):m("",!0),_("div",I_,[o(h,null,{default:g(()=>{var a;return[e.attachments?(t(),q(ee,{key:0,"column-num":3},{default:g(()=>[(t(!0),i(T,null,F(e.attachments,(f,A)=>(t(),q(l,{key:A},{default:g(()=>[o(c,{fit:"cover",width:"100%",height:"110rem",src:f.origin_url,"lazy-load":"true",onClick:J_=>U(f.pic_url,A,e.attachments)},null,8,["src","onClick"])]),_:2},1024))),128))]),_:2},1024)):m("",!0),!e.attachments&&!((a=e.high_url)!=null&&a.toString().includes("mp4"))&&e.high_url?(t(),q(c,{key:1,fit:"cover",width:"100%",height:"100%",src:e.high_url,"lazy-load":"true",onClick:f=>W(e.high_url,0)},null,8,["src","onClick"])):m("",!0)]}),_:2},1024)]),e.hot_comment?(t(),i("div",S_,[_("div",b_,[_("p",null,[_("span",null,[o(c,{round:"",fit:"cover",width:"30rem",height:"30rem",src:e.hot_comment.user.medium},null,8,["src"])]),p(" "+s(e.hot_comment.user.login),1)]),_("span",null,s(e.hot_comment.like_count)+" \u8D5E",1)]),_("div",$_,[_("p",null,s(e.hot_comment.content),1)])])):m("",!0),_("div",N_,[_("div",B_,[_("p",null,[_("span",{class:H({active:d(C).includes(e.id)}),onClick:a=>D(e.id)},null,10,P_),p(s(d(C).includes(e.id)?((P=e==null?void 0:e.votes)==null?void 0:P.up)+1:(V=e==null?void 0:e.votes)==null?void 0:V.up),1),_("span",{onClick:a=>G(e.id),class:H({notactive:d(E).includes(e.id)})},null,10,V_)])]),_("div",A_,[_("p",{onClick:r[0]||(r[0]=a=>w.value=!0)},[L_,p(s(e.comments_count),1),T_,p(s(e.share_count>0?e.share_count:"\u5206\u4EAB"),1)])])])])}),128))])}}};export{E_ as default};
